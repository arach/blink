/* CodeMirror Custom Styles for Blink */

/* Hide default scrollbars and use custom ones */
.cm-scroller {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border) / 0.3) transparent;
}

.cm-scroller::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.cm-scroller::-webkit-scrollbar-track {
  background: transparent;
}

.cm-scroller::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border) / 0.3);
  border-radius: 4px;
  border: 2px solid transparent;
  background-clip: content-box;
}

.cm-scroller::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--border) / 0.5);
}

/* Paper styles for CodeMirror */
.cm-editor.note-paper-dotted-grid .cm-content {
  background-image: 
    radial-gradient(circle at 1px 1px, hsl(var(--muted-foreground) / 0.25) 1px, transparent 1px);
  background-size: 20px 20px;
  background-position: 0 0;
}

.cm-editor.note-paper-lines .cm-content {
  background-image: 
    repeating-linear-gradient(
      to bottom,
      transparent,
      transparent 27px,
      hsl(var(--muted-foreground) / 0.15) 27px,
      hsl(var(--muted-foreground) / 0.15) 28px
    );
}

.cm-editor.note-paper-ruled .cm-content {
  background-image: 
    linear-gradient(to right, hsl(var(--red) / 0.2) 0px, hsl(var(--red) / 0.2) 1px, transparent 1px, transparent 100%),
    repeating-linear-gradient(
      to bottom,
      transparent,
      transparent 27px,
      hsl(var(--primary) / 0.1) 27px,
      hsl(var(--primary) / 0.1) 28px
    );
  background-position: 60px 0;
}

/* Vim mode cursor styles */
.cm-editor.cm-vim-mode .cm-cursor-primary {
  display: block !important;
  width: 0.7em !important;
  background-color: hsl(var(--primary)) !important;
  border: none !important;
  outline: 1px solid hsl(var(--primary) / 0.3);
}

.cm-editor.cm-vim-mode.cm-vim-insert .cm-cursor-primary {
  width: 2px !important;
  background-color: transparent !important;
  border-left: 2px solid hsl(var(--primary)) !important;
  outline: none;
}

/* Make vim block cursor more visible */
.cm-editor.cm-focused.cm-vim-mode:not(.cm-vim-insert) .cm-cursor-primary {
  background-color: hsl(var(--primary)) !important;
  opacity: 0.8;
}

/* Vim command line styling */
.cm-vim-panel input {
  background: transparent;
  border: none;
  outline: none;
  color: inherit;
  font-family: inherit;
  font-size: inherit;
}

/* Search match highlighting */
.cm-searchMatch {
  background-color: hsl(var(--primary) / 0.3);
  outline: 1px solid hsl(var(--primary) / 0.5);
}

.cm-searchMatch.cm-searchMatch-selected {
  background-color: hsl(var(--primary) / 0.6);
}

/* Markdown syntax highlighting */
.cm-header-1 {
  font-size: 2em;
  font-weight: 700;
  color: hsl(var(--foreground));
  line-height: 1.2;
}

.cm-header-2 {
  font-size: 1.5em;
  font-weight: 600;
  color: hsl(var(--foreground));
  line-height: 1.3;
}

.cm-header-3 {
  font-size: 1.25em;
  font-weight: 600;
  color: hsl(var(--foreground));
  line-height: 1.4;
}

.cm-header-4, .cm-header-5, .cm-header-6 {
  font-size: 1.1em;
  font-weight: 600;
  color: hsl(var(--foreground));
}

.cm-link {
  color: hsl(var(--primary));
  text-decoration: underline;
}

.cm-url {
  color: hsl(var(--primary) / 0.7);
}

.cm-emphasis {
  font-style: italic;
}

.cm-strong {
  font-weight: 700;
}

.cm-strikethrough {
  text-decoration: line-through;
}

.cm-quote {
  color: hsl(var(--muted-foreground));
  border-left: 3px solid hsl(var(--primary) / 0.3);
  padding-left: 1em;
}

.cm-list {
  color: hsl(var(--primary) / 0.8);
}

.cm-code {
  background-color: hsl(var(--muted) / 0.3);
  padding: 0.1em 0.3em;
  border-radius: 3px;
  font-family: ui-monospace, monospace;
  font-size: 0.9em;
}

.cm-codeblock {
  background-color: hsl(var(--muted) / 0.2);
  padding: 0.5em;
  border-radius: 6px;
  font-family: ui-monospace, monospace;
}

/* Line wrapping */
.cm-lineWrapping {
  word-break: break-word;
}

/* Focus mode enhancements */
.focus-mode .cm-line:not(.cm-activeLine) {
  opacity: 0.5;
  transition: opacity 0.3s ease;
}

.focus-mode .cm-activeLine {
  opacity: 1;
}

/* Typewriter mode */
.cm-content.typewriter-mode {
  padding-top: 50vh !important;
  padding-bottom: 50vh !important;
}

/* Remove any box shadows or borders that might appear */
.cm-editor {
  box-shadow: none !important;
}

.cm-editor.cm-focused {
  box-shadow: none !important;
}

/* Ensure proper text color */
.cm-content {
  color: hsl(var(--foreground));
  caret-color: hsl(var(--primary));
}